<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title>Solidity API</title>
    <link type="text/css" rel="stylesheet" href="assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
  </head>
  <body>
    <article class="markdown-body"><h1 id="solidity-api"><a class="header-link" href="#solidity-api"></a>Solidity API</h1>
<h2 id="ispectrrfi"><a class="header-link" href="#ispectrrfi"></a>ISpectrrFi</h2>
<h3 id="createsaleoffer"><a class="header-link" href="#createsaleoffer"></a>createSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> create<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">sellingTokenAmount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">sellingTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">exchangeRate</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">sellingForTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">repayInSeconds</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">collateralToDebtRatio</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">liquidationRatio</span>)</span> <span class="hljs-keyword">external</span> returns (uint256)</code></pre><h3 id="acceptsaleoffer"><a class="header-link" href="#acceptsaleoffer"></a>acceptSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> accept<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">collateralTokenId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="cancelsaleoffer"><a class="header-link" href="#cancelsaleoffer"></a>cancelSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> cancel<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="addcollateralsaleoffer"><a class="header-link" href="#addcollateralsaleoffer"></a>addCollateralSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> add<span class="hljs-constructor">CollateralSaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">amountToAdd</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="repaysaleoffer"><a class="header-link" href="#repaysaleoffer"></a>repaySaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> repay<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="repaysaleofferpart"><a class="header-link" href="#repaysaleofferpart"></a>repaySaleOfferPart</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> repay<span class="hljs-constructor">SaleOfferPart(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">amountToRepay</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="liquidatesaleoffer"><a class="header-link" href="#liquidatesaleoffer"></a>liquidateSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> liquidate<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="forfeitsaleoffer"><a class="header-link" href="#forfeitsaleoffer"></a>forfeitSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> forfeit<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="changeaddresssale"><a class="header-link" href="#changeaddresssale"></a>changeAddressSale</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> change<span class="hljs-constructor">AddressSale(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">newAddress</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">addressType</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="createbuyoffer"><a class="header-link" href="#createbuyoffer"></a>createBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> create<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">buyingTokenAmount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">buyingTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">exchangeRate</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">buyingForTokenId</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">collateralTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">repayInSeconds</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">collateralToDebtRatio</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">liquidationRatio</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="acceptbuyoffer"><a class="header-link" href="#acceptbuyoffer"></a>acceptBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> accept<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="cancelbuyoffer"><a class="header-link" href="#cancelbuyoffer"></a>cancelBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> cancel<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="addcollateralbuyoffer"><a class="header-link" href="#addcollateralbuyoffer"></a>addCollateralBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> add<span class="hljs-constructor">CollateralBuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">amountToAdd</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="repaybuyoffer"><a class="header-link" href="#repaybuyoffer"></a>repayBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> repay<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="repaybuyofferpart"><a class="header-link" href="#repaybuyofferpart"></a>repayBuyOfferPart</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> repay<span class="hljs-constructor">BuyOfferPart(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">amountToRepay</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="liquidatebuyoffer"><a class="header-link" href="#liquidatebuyoffer"></a>liquidateBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> liquidate<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="forfeitbuyoffer"><a class="header-link" href="#forfeitbuyoffer"></a>forfeitBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> forfeit<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h3 id="changeaddressbuy"><a class="header-link" href="#changeaddressbuy"></a>changeAddressBuy</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> change<span class="hljs-constructor">AddressBuy(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">newAddress</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">addressType</span>)</span> <span class="hljs-keyword">external</span></code></pre><h2 id="spectrrdata"><a class="header-link" href="#spectrrdata"></a>SpectrrData</h2>
<p>Defines and initializes the data for the SpectrrCore Contract</p>
<h3 id="ratio_liquidation_is_loss"><a class="header-link" href="#ratio_liquidation_is_loss"></a>RATIO_LIQUIDATION_IS_LOSS</h3>
<pre class="hljs"><code><span class="hljs-built_in">uint</span>256 RATIO_LIQUIDATION_IS_LOSS</code></pre><p>The collateral to debt ratio when the value of the collateral is equal to the value of the debt (1.00)</p>
<h3 id="wei"><a class="header-link" href="#wei"></a>WEI</h3>
<pre class="hljs"><code><span class="hljs-built_in">uint</span>256 WEI</code></pre><p>Constant used to multiply numbers by 10^18</p>
<h3 id="saleofferscount"><a class="header-link" href="#saleofferscount"></a>saleOffersCount</h3>
<pre class="hljs"><code><span class="hljs-built_in">uint</span>256 saleOffersCount</code></pre><p><em>Number of existing sale offers, initialized as 0 in the beginning,
        and incremented by one at every sale offer creation.</em></p>
<h3 id="buyofferscount"><a class="header-link" href="#buyofferscount"></a>buyOffersCount</h3>
<pre class="hljs"><code><span class="hljs-built_in">uint</span>256 buyOffersCount</code></pre><p><em>Number of existing buy offers, initialized as 0 in the beginning,
        and incremented by one at every buy offer creation.</em></p>
<h3 id="saleoffers"><a class="header-link" href="#saleoffers"></a>saleOffers</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-title">mapping</span><span class="hljs-params">(uint256 =&gt; struct SpectrrData.SaleOffer)</span></span> saleOffers</code></pre><p><em>Map of offer id (saleOffersCount) and sale offer struct</em></p>
<h3 id="buyoffers"><a class="header-link" href="#buyoffers"></a>buyOffers</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-title">mapping</span><span class="hljs-params">(uint256 =&gt; struct SpectrrData.BuyOffer)</span></span> buyOffers</code></pre><p><em>Map of offer id (buyOffersCount) and buy offer struct</em></p>
<h3 id="offerstatus"><a class="header-link" href="#offerstatus"></a>OfferStatus</h3>
<pre class="hljs"><code><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">OfferStatus</span> {</span>
  open,
  accepted,
  closed
}</code></pre><h3 id="offerlockstate"><a class="header-link" href="#offerlockstate"></a>OfferLockState</h3>
<pre class="hljs"><code><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">OfferLockState</span> </span>{
  locked,
  unlocked
}</code></pre><h3 id="saleoffer"><a class="header-link" href="#saleoffer"></a>SaleOffer</h3>
<pre class="hljs"><code><span class="hljs-attribute">struct</span> SaleOffer {
  <span class="hljs-attribute">enum</span> SpectrrData.OfferStatus offerStatus;
  <span class="hljs-attribute">enum</span> SpectrrData.OfferLockState offerLockState;
  <span class="hljs-attribute">uint256</span> selling;
  <span class="hljs-attribute">uint256</span> sellingFor;
  <span class="hljs-attribute">uint256</span> collateral;
  <span class="hljs-attribute">uint256</span> repayInSeconds;
  <span class="hljs-attribute">uint256</span> timeAccepted;
  <span class="hljs-attribute">uint256</span> collateralToDebtRatio;
  <span class="hljs-attribute">uint256</span> liquidationRatio;
  <span class="hljs-attribute">uint8</span> sellingId;
  <span class="hljs-attribute">uint8</span> sellingForId;
  <span class="hljs-attribute">uint8</span> collateralId;
  <span class="hljs-attribute">address</span> seller;
  <span class="hljs-attribute">address</span> buyer;
}</code></pre><h3 id="buyoffer"><a class="header-link" href="#buyoffer"></a>BuyOffer</h3>
<pre class="hljs"><code><span class="hljs-attribute">struct</span> BuyOffer {
  <span class="hljs-attribute">enum</span> SpectrrData.OfferStatus offerStatus;
  <span class="hljs-attribute">enum</span> SpectrrData.OfferLockState offerLockState;
  <span class="hljs-attribute">uint256</span> buying;
  <span class="hljs-attribute">uint256</span> buyingFor;
  <span class="hljs-attribute">uint256</span> collateral;
  <span class="hljs-attribute">uint256</span> repayInSeconds;
  <span class="hljs-attribute">uint256</span> timeAccepted;
  <span class="hljs-attribute">uint256</span> collateralToDebtRatio;
  <span class="hljs-attribute">uint256</span> liquidationRatio;
  <span class="hljs-attribute">uint8</span> buyingId;
  <span class="hljs-attribute">uint8</span> buyingForId;
  <span class="hljs-attribute">uint8</span> collateralId;
  <span class="hljs-attribute">address</span> seller;
  <span class="hljs-attribute">address</span> buyer;
}</code></pre><h3 id="saleoffercreated"><a class="header-link" href="#saleoffercreated"></a>SaleOfferCreated</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferCreated(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">selling</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">sellingId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">sellingFor</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">sellingForId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">exRate</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">repayInSeconds</span>, <span class="hljs-params">address</span> <span class="hljs-params">seller</span>)</span></code></pre><p>Event emitted when a sale offer is created</p>
<h3 id="saleofferaccepted"><a class="header-link" href="#saleofferaccepted"></a>SaleOfferAccepted</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferAccepted(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">collateral</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">collateralId</span>, <span class="hljs-params">address</span> <span class="hljs-params">buyer</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">timestamp</span>)</span></code></pre><p>Event emitted when a sale offer is accepted</p>
<h3 id="saleoffercollateraladded"><a class="header-link" href="#saleoffercollateraladded"></a>SaleOfferCollateralAdded</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferCollateralAdded(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">amount</span>)</span></code></pre><p>Event emitted when collateral is added to a sale offer</p>
<h3 id="saleoffercanceled"><a class="header-link" href="#saleoffercanceled"></a>SaleOfferCanceled</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferCanceled(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span></code></pre><p>Event emitted when a sale offer is canceled</p>
<h3 id="saleofferliquidated"><a class="header-link" href="#saleofferliquidated"></a>SaleOfferLiquidated</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferLiquidated(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">liquidator</span>)</span></code></pre><p>Event emitted when a sale offer is liquidated</p>
<h3 id="saleofferselleraddresschanged"><a class="header-link" href="#saleofferselleraddresschanged"></a>SaleOfferSellerAddressChanged</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferSellerAddressChanged(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">newAddress</span>)</span></code></pre><p>Event emitted when the seller address of a sale offer changes</p>
<h3 id="saleofferbuyeraddresschanged"><a class="header-link" href="#saleofferbuyeraddresschanged"></a>SaleOfferBuyerAddressChanged</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferBuyerAddressChanged(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">newAddress</span>)</span></code></pre><p>Event emitted when the buyer address of a sale offer changes</p>
<h3 id="saleofferrepaid"><a class="header-link" href="#saleofferrepaid"></a>SaleOfferRepaid</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferRepaid(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">amount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">amountId</span>, <span class="hljs-params">bool</span> <span class="hljs-params">byPart</span>)</span></code></pre><p>Event emitted when a sale offer is repaid</p>
<h3 id="saleofferforfeited"><a class="header-link" href="#saleofferforfeited"></a>SaleOfferForfeited</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">SaleOfferForfeited(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span></code></pre><p>Event emitted when a sale offer is forfeited</p>
<h3 id="buyoffercreated"><a class="header-link" href="#buyoffercreated"></a>BuyOfferCreated</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferCreated(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">buying</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">buyingId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">buyingFor</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">buyingForId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">exRate</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">collateralId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">repayInSeconds</span>, <span class="hljs-params">address</span> <span class="hljs-params">buyer</span>)</span></code></pre><p>Event emitted when a buy offer is created</p>
<h3 id="buyofferaccepted"><a class="header-link" href="#buyofferaccepted"></a>BuyOfferAccepted</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferAccepted(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">seller</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">timestamp</span>)</span></code></pre><p>Event emitted when a buy offer is accepted</p>
<h3 id="buyoffercollateraladded"><a class="header-link" href="#buyoffercollateraladded"></a>BuyOfferCollateralAdded</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferCollateralAdded(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">amount</span>)</span></code></pre><p>Event emitted when collateral is added to a buy offer</p>
<h3 id="buyoffercanceled"><a class="header-link" href="#buyoffercanceled"></a>BuyOfferCanceled</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferCanceled(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span></code></pre><p>Event emitted when a buy offer is canceled</p>
<h3 id="buyofferliquidated"><a class="header-link" href="#buyofferliquidated"></a>BuyOfferLiquidated</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferLiquidated(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">liquidator</span>)</span></code></pre><p>Event emitted when a buy offer is liquidated</p>
<h3 id="buyofferselleraddresschanged"><a class="header-link" href="#buyofferselleraddresschanged"></a>BuyOfferSellerAddressChanged</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferSellerAddressChanged(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">newAddress</span>)</span></code></pre><p>Event emitted when the seller address of a buy offer changes</p>
<h3 id="buyofferbuyeraddresschanged"><a class="header-link" href="#buyofferbuyeraddresschanged"></a>BuyOfferBuyerAddressChanged</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferBuyerAddressChanged(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">newAddress</span>)</span></code></pre><p>Event emitted when the buyer address of a buy offer changes</p>
<h3 id="buyofferrepaid"><a class="header-link" href="#buyofferrepaid"></a>BuyOfferRepaid</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferRepaid(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">amount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">amountId</span>, <span class="hljs-params">bool</span> <span class="hljs-params">byPart</span>)</span></code></pre><p>Event emitted when a buy offer is repaid</p>
<h3 id="buyofferforfeited"><a class="header-link" href="#buyofferforfeited"></a>BuyOfferForfeited</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">BuyOfferForfeited(<span class="hljs-params">uint256</span> <span class="hljs-params">offerId</span>)</span></code></pre><p>Event emitted when a buy offer is forfeited</p>
<h3 id="locksaleoffer"><a class="header-link" href="#locksaleoffer"></a>lockSaleOffer</h3>
<pre class="hljs"><code>modifier lock<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span></code></pre><p><em>Modifier used to protect from reentrancy.
        Called when a function changing the state of a sale offer struct is entered, it prevents changes by anyone aside from the current msg.sender.
        It differs from the nonReentrant modifier, 
        as the latter only restricts the msg.sender from calling other functions in the contract.</em></p>
<h3 id="lockbuyoffer"><a class="header-link" href="#lockbuyoffer"></a>lockBuyOffer</h3>
<pre class="hljs"><code>modifier lock<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span></code></pre><p><em>Same as modifier above, but for buy offers</em></p>
<h2 id="spectrrfi"><a class="header-link" href="#spectrrfi"></a>SpectrrFi</h2>
<h3 id="constructor"><a class="header-link" href="#constructor"></a>constructor</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">()</span> <span class="hljs-title">public</span></span></code></pre><p><em>EIP712 Constructor
EIP712&#39;s params are the name and version of the contract</em></p>
<h3 id="createsaleoffer-1"><a class="header-link" href="#createsaleoffer-1"></a>createSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> create<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_sellingTokenAmount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_sellingTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_exchangeRate</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_sellingForTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_repayInSeconds</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralToDebtRatio</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_liquidationRatio</span>)</span> <span class="hljs-keyword">external</span> returns (uint256)</code></pre><p>Creates and posts a sale offer
There is a 0.1% fee of the selling amount, paid by the seller to the fee address.</p>
<h4 id="parameters"><a class="header-link" href="#parameters"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_sellingTokenAmount</td>
<td>uint256</td>
<td>Amount the sender is selling</td>
</tr>
<tr>
<td>_sellingTokenId</td>
<td>uint8</td>
<td>Id of the selling token, can not be same than id of sell for token.</td>
</tr>
<tr>
<td>_exchangeRate</td>
<td>uint256</td>
<td>Exchange rate between the selling amount sell for amount</td>
</tr>
<tr>
<td>_sellingForTokenId</td>
<td>uint8</td>
<td>Id of the token exchanged for, can not be same than id of the selling token.</td>
</tr>
<tr>
<td>_repayInSeconds</td>
<td>uint256</td>
<td>Repayment period in unix seconds, a value of 0 will allow an unlimited repayment time .</td>
</tr>
<tr>
<td>_collateralToDebtRatio</td>
<td>uint256</td>
<td></td>
</tr>
<tr>
<td>_liquidationRatio</td>
<td>uint256</td>
<td></td>
</tr>
</tbody></table>
<h4 id="return-values"><a class="header-link" href="#return-values"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>uint256 Id of the offer created</td>
</tr>
</tbody></table>
<h3 id="acceptsaleoffer-1"><a class="header-link" href="#acceptsaleoffer-1"></a>acceptSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> accept<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h4 id="parameters-1"><a class="header-link" href="#parameters-1"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td></td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the token to be pledged as collateral,         cannot be same than id of selling token.</td>
</tr>
</tbody></table>
<h3 id="cancelsaleoffer-1"><a class="header-link" href="#cancelsaleoffer-1"></a>cancelSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> cancel<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Cancels a sale offer, given that it is not accepted yet</p>
<h4 id="parameters-2"><a class="header-link" href="#parameters-2"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the sale offer to cancel</td>
</tr>
</tbody></table>
<h3 id="addcollateralsaleoffer-1"><a class="header-link" href="#addcollateralsaleoffer-1"></a>addCollateralSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> add<span class="hljs-constructor">CollateralSaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountToAdd</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Adds collateral to a sale offer</p>
<p><em>Can only be called by the buyer of the sale offer</em></p>
<h4 id="parameters-3"><a class="header-link" href="#parameters-3"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the sale offer to add collateral to</td>
</tr>
<tr>
<td>_amountToAdd</td>
<td>uint256</td>
<td>Amount of collateral to add</td>
</tr>
</tbody></table>
<h3 id="repaysaleoffer-1"><a class="header-link" href="#repaysaleoffer-1"></a>repaySaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> repay<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Fully repays the debt of a sale offer</p>
<h4 id="parameters-4"><a class="header-link" href="#parameters-4"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the sale offer to repay</td>
</tr>
</tbody></table>
<h3 id="repaysaleofferpart-1"><a class="header-link" href="#repaysaleofferpart-1"></a>repaySaleOfferPart</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> repay<span class="hljs-constructor">SaleOfferPart(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountToRepay</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Partially repays the debt of a sale offer</p>
<h4 id="parameters-5"><a class="header-link" href="#parameters-5"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the sale offer to partially repay</td>
</tr>
<tr>
<td>_amountToRepay</td>
<td>uint256</td>
<td>Amount to partially repay</td>
</tr>
</tbody></table>
<h3 id="liquidatesaleoffer-1"><a class="header-link" href="#liquidatesaleoffer-1"></a>liquidateSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> liquidate<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h4 id="parameters-6"><a class="header-link" href="#parameters-6"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the sale offer to liquidate</td>
</tr>
</tbody></table>
<h3 id="forfeitsaleoffer-1"><a class="header-link" href="#forfeitsaleoffer-1"></a>forfeitSaleOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> forfeit<span class="hljs-constructor">SaleOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Forfeits a sale offer</p>
<p><em>Only callable by the buyer
Transaction is reverted if it incurs a loss to the seller</em></p>
<h4 id="parameters-7"><a class="header-link" href="#parameters-7"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the sale offer to forfeit</td>
</tr>
</tbody></table>
<h3 id="createbuyoffer-1"><a class="header-link" href="#createbuyoffer-1"></a>createBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> create<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_buyingTokenAmount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_buyingTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_exchangeRate</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_buyingForTokenId</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_repayInSeconds</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralToDebtRatio</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_liquidationRatio</span>)</span> <span class="hljs-keyword">external</span> returns (uint256)</code></pre><h4 id="parameters-8"><a class="header-link" href="#parameters-8"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_buyingTokenAmount</td>
<td>uint256</td>
<td></td>
</tr>
<tr>
<td>_buyingTokenId</td>
<td>uint8</td>
<td></td>
</tr>
<tr>
<td>_exchangeRate</td>
<td>uint256</td>
<td></td>
</tr>
<tr>
<td>_buyingForTokenId</td>
<td>uint8</td>
<td></td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td></td>
</tr>
<tr>
<td>_repayInSeconds</td>
<td>uint256</td>
<td>Repayment timeframe in unix seconds,         a value of 0 will allow an unlimited repayment time .</td>
</tr>
<tr>
<td>_collateralToDebtRatio</td>
<td>uint256</td>
<td></td>
</tr>
<tr>
<td>_liquidationRatio</td>
<td>uint256</td>
<td></td>
</tr>
</tbody></table>
<h3 id="acceptbuyoffer-1"><a class="header-link" href="#acceptbuyoffer-1"></a>acceptBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> accept<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Accepts a buy offer by transferring the amount buying from the seller to the buyer
There is a 0.1% fee of the buying amount, paid by the seller.</p>
<h4 id="parameters-9"><a class="header-link" href="#parameters-9"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the buy offer to accept</td>
</tr>
</tbody></table>
<h3 id="cancelbuyoffer-1"><a class="header-link" href="#cancelbuyoffer-1"></a>cancelBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> cancel<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Cancels a buy offer, given that it not accepted yet</p>
<h4 id="parameters-10"><a class="header-link" href="#parameters-10"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the buy offer to cancel</td>
</tr>
</tbody></table>
<h3 id="addcollateralbuyoffer-1"><a class="header-link" href="#addcollateralbuyoffer-1"></a>addCollateralBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> add<span class="hljs-constructor">CollateralBuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountToAdd</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Adds collateral to a buy offer</p>
<p><em>Can only be called by the buyer of the buy offer</em></p>
<h4 id="parameters-11"><a class="header-link" href="#parameters-11"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the buy offer to add collateral to</td>
</tr>
<tr>
<td>_amountToAdd</td>
<td>uint256</td>
<td>The amount of collateral to add</td>
</tr>
</tbody></table>
<h3 id="repaybuyoffer-1"><a class="header-link" href="#repaybuyoffer-1"></a>repayBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> repay<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Fully repays the debt of the buy offer</p>
<h4 id="parameters-12"><a class="header-link" href="#parameters-12"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the buy offer to repay</td>
</tr>
</tbody></table>
<h3 id="repaybuyofferpart-1"><a class="header-link" href="#repaybuyofferpart-1"></a>repayBuyOfferPart</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> repay<span class="hljs-constructor">BuyOfferPart(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountToRepay</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Partially repays the debt of a buy offer</p>
<h4 id="parameters-13"><a class="header-link" href="#parameters-13"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the buy offer to partially repay</td>
</tr>
<tr>
<td>_amountToRepay</td>
<td>uint256</td>
<td>Amount to partially repay</td>
</tr>
</tbody></table>
<h3 id="liquidatebuyoffer-1"><a class="header-link" href="#liquidatebuyoffer-1"></a>liquidateBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> liquidate<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><h4 id="parameters-14"><a class="header-link" href="#parameters-14"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the buy offer to liquidate</td>
</tr>
</tbody></table>
<h3 id="forfeitbuyoffer-1"><a class="header-link" href="#forfeitbuyoffer-1"></a>forfeitBuyOffer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> forfeit<span class="hljs-constructor">BuyOffer(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Forfeits a buy offer</p>
<p><em>Only callable by the buyer
Transaction is reverted if it incurs a loss to the seller</em></p>
<h4 id="parameters-15"><a class="header-link" href="#parameters-15"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the buy offer to forfeit</td>
</tr>
</tbody></table>
<h3 id="changeaddresssale-1"><a class="header-link" href="#changeaddresssale-1"></a>changeAddressSale</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> change<span class="hljs-constructor">AddressSale(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">_newAddress</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_addressType</span>)</span> <span class="hljs-keyword">external</span></code></pre><h4 id="parameters-16"><a class="header-link" href="#parameters-16"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the offer we want to change addresses</td>
</tr>
<tr>
<td>_newAddress</td>
<td>address</td>
<td>New address to replace the old one with</td>
</tr>
<tr>
<td>_addressType</td>
<td>uint8</td>
<td>Type of address: 0 for seller address, and 1 for buyer address.</td>
</tr>
</tbody></table>
<h3 id="changeaddressbuy-1"><a class="header-link" href="#changeaddressbuy-1"></a>changeAddressBuy</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> change<span class="hljs-constructor">AddressBuy(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>, <span class="hljs-params">address</span> <span class="hljs-params">_newAddress</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_addressType</span>)</span> <span class="hljs-keyword">external</span></code></pre><h4 id="parameters-17"><a class="header-link" href="#parameters-17"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerId</td>
<td>uint256</td>
<td>Id of the offer we want to change addresses</td>
</tr>
<tr>
<td>_newAddress</td>
<td>address</td>
<td>New address to replace the old one with</td>
</tr>
<tr>
<td>_addressType</td>
<td>uint8</td>
<td>Type of address: 0 for seller address, and 1 for buyer address.</td>
</tr>
</tbody></table>
<h3 id="getsaleofferfromid"><a class="header-link" href="#getsaleofferfromid"></a>getSaleOfferFromId</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> get<span class="hljs-constructor">SaleOfferFromId(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span> view returns (<span class="hljs-keyword">struct</span> SpectrrData.SaleOffer)</code></pre><p>Gets data of a sale offer from its Id (e.g. amount selling, seller address...)</p>
<h3 id="getbuyofferfromid"><a class="header-link" href="#getbuyofferfromid"></a>getBuyOfferFromId</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> get<span class="hljs-constructor">BuyOfferFromId(<span class="hljs-params">uint256</span> <span class="hljs-params">_offerId</span>)</span> <span class="hljs-keyword">external</span> view returns (<span class="hljs-keyword">struct</span> SpectrrData.BuyOffer)</code></pre><p>Gets data of a buy offer from its Id (e.g. amount selling, seller address...)</p>
<h2 id="spectrrmanager"><a class="header-link" href="#spectrrmanager"></a>SpectrrManager</h2>
<p>This contract handles functions that can only be called by the dev address (e.g.: Adding new tradable tokens).</p>
<h3 id="fee_percent"><a class="header-link" href="#fee_percent"></a>FEE_PERCENT</h3>
<pre class="hljs"><code><span class="hljs-built_in">uint</span>16 FEE_PERCENT</code></pre><p>Fee corresponding to 0.1% (100 / 0.1 = 1000),
                taken when an offer is created and accepted.</p>
<h3 id="tokencount"><a class="header-link" href="#tokencount"></a>tokenCount</h3>
<pre class="hljs"><code><span class="hljs-built_in">uint</span>8 tokenCount</code></pre><p>The number of tokens tradable by this contract</p>
<p><em>Used as a counter for the tokens mapping</em></p>
<h3 id="tokens"><a class="header-link" href="#tokens"></a>tokens</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-title">mapping</span><span class="hljs-params">(uint8 =&gt; struct SpectrrManager.Token)</span></span> tokens</code></pre><p><em>Map of the number of tokens and Token struct</em></p>
<h3 id="token"><a class="header-link" href="#token"></a>Token</h3>
<pre class="hljs"><code><span class="hljs-attribute">struct</span> Token {
  <span class="hljs-attribute">string</span> name;
  <span class="hljs-attribute">uint8</span> decimals;
  <span class="hljs-attribute">uint8</span> chainlinkPriceDecimals;
  <span class="hljs-attribute">address</span> dividendContractAddress;
  <span class="hljs-attribute">address</span> chainlinkOracleAddress;
  <span class="hljs-attribute">address</span> addr;
}</code></pre><h3 id="newtokenadded"><a class="header-link" href="#newtokenadded"></a>NewTokenAdded</h3>
<pre class="hljs"><code>event <span class="hljs-constructor">NewTokenAdded(<span class="hljs-params">string</span> <span class="hljs-params">tokenName</span>, <span class="hljs-params">address</span> <span class="hljs-params">tokenAddress</span>, <span class="hljs-params">address</span> <span class="hljs-params">dividendTokenContractAddress</span>, <span class="hljs-params">address</span> <span class="hljs-params">chainlinkOracleAddress</span>)</span></code></pre><p>Event emitted when a new token is added</p>
<h3 id="addtoken"><a class="header-link" href="#addtoken"></a>addToken</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> add<span class="hljs-constructor">Token(<span class="hljs-params">string</span> <span class="hljs-params">_tokenName</span>, <span class="hljs-params">address</span> <span class="hljs-params">_tokenAddress</span>, <span class="hljs-params">address</span> <span class="hljs-params">_chainlinkOracleAddress</span>, <span class="hljs-params">address</span> <span class="hljs-params">_dividendContractAddress</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_chainlinkOracleDecimals</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_decimals</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Adds a token to the array of tokens tradable by this contract</p>
<p><em>Only callable by owner</em></p>
<h4 id="parameters-18"><a class="header-link" href="#parameters-18"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_tokenName</td>
<td>string</td>
<td>Name of the token to add in the format: &quot;wbtc&quot;</td>
</tr>
<tr>
<td>_tokenAddress</td>
<td>address</td>
<td>Address of the token</td>
</tr>
<tr>
<td>_chainlinkOracleAddress</td>
<td>address</td>
<td>Address of the chainlink contract used to take the price from</td>
</tr>
<tr>
<td>_dividendContractAddress</td>
<td>address</td>
<td></td>
</tr>
<tr>
<td>_chainlinkOracleDecimals</td>
<td>uint8</td>
<td>Number of decimals the chainlink price has</td>
</tr>
<tr>
<td>_decimals</td>
<td>uint8</td>
<td>Number of decimals the token contract has</td>
</tr>
</tbody></table>
<h3 id="changechainlinkoracleaddress"><a class="header-link" href="#changechainlinkoracleaddress"></a>changeChainlinkOracleAddress</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> change<span class="hljs-constructor">ChainlinkOracleAddress(<span class="hljs-params">uint8</span> <span class="hljs-params">_tokenId</span>, <span class="hljs-params">address</span> <span class="hljs-params">_newChainlinkOracleAddress</span>)</span> <span class="hljs-keyword">external</span></code></pre><p>Changes the address of the chainlink oracle of a token</p>
<p><em>Only callable by the current owner</em></p>
<h4 id="parameters-19"><a class="header-link" href="#parameters-19"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_tokenId</td>
<td>uint8</td>
<td>id of the token we want to change the oracle address</td>
</tr>
<tr>
<td>_newChainlinkOracleAddress</td>
<td>address</td>
<td>address of the new chainlink oracle</td>
</tr>
</tbody></table>
<h2 id="spectrrprices"><a class="header-link" href="#spectrrprices"></a>SpectrrPrices</h2>
<p>Fetches the prices of various currency pairs from Chainlink price feed oracles</p>
<h3 id="getchainlinkprice"><a class="header-link" href="#getchainlinkprice"></a>getChainlinkPrice</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> getChainlinkPrice(address _chainlinkOracleAddress) <span class="hljs-built_in">public</span> <span class="hljs-keyword">view</span> <span class="hljs-keyword">returns</span> (int256)</code></pre><p>Gets the price of a token from a chainlink oracle address</p>
<h4 id="parameters-20"><a class="header-link" href="#parameters-20"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_chainlinkOracleAddress</td>
<td>address</td>
<td>The address of the chainlink oracle</td>
</tr>
</tbody></table>
<h2 id="spectrrutils"><a class="header-link" href="#spectrrutils"></a>SpectrrUtils</h2>
<p>This contract handles &#39;secondary&#39; functions, such as transferring tokens and calculating collateral tokens.</p>
<h3 id="getblocktimestamp"><a class="header-link" href="#getblocktimestamp"></a>getBlockTimestamp</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> getBlockTimestamp() <span class="hljs-keyword">external</span> <span class="hljs-keyword">view</span> <span class="hljs-keyword">returns</span> (uint256)</code></pre><p>Gets the current block timestamp</p>
<h4 id="return-values-1"><a class="header-link" href="#return-values-1"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>uint256 The current block timestamp</td>
</tr>
</tbody></table>
<h3 id="getitokenfromid"><a class="header-link" href="#getitokenfromid"></a>getITokenFromId</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> getITokenFromId(uint8 _tokenId) <span class="hljs-built_in">public</span> <span class="hljs-keyword">view</span> <span class="hljs-keyword">returns</span> (contract IERC20)</code></pre><p>Gets the interface of a token based on its id</p>
<h4 id="parameters-21"><a class="header-link" href="#parameters-21"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_tokenId</td>
<td>uint8</td>
<td>Id of the ERC20 token we want the interface</td>
</tr>
</tbody></table>
<h4 id="return-values-2"><a class="header-link" href="#return-values-2"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>contract IERC20</td>
<td>IERC20 The ERC20 Interface of the token</td>
</tr>
</tbody></table>
<h3 id="gettokendecimalsfromid"><a class="header-link" href="#gettokendecimalsfromid"></a>getTokenDecimalsFromId</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> getTokenDecimalsFromId(uint8 _tokenId) <span class="hljs-built_in">public</span> <span class="hljs-keyword">view</span> <span class="hljs-keyword">returns</span> (uint8)</code></pre><p>Gets the number of decimals of an ERC20 token</p>
<h4 id="parameters-22"><a class="header-link" href="#parameters-22"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_tokenId</td>
<td>uint8</td>
<td>Id of the ERC20 token</td>
</tr>
</tbody></table>
<h4 id="return-values-3"><a class="header-link" href="#return-values-3"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint8</td>
<td>uint8 The number of decimals</td>
</tr>
</tbody></table>
<h3 id="amounttowei"><a class="header-link" href="#amounttowei"></a>amountToWei</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> amount<span class="hljs-constructor">ToWei(<span class="hljs-params">uint256</span> <span class="hljs-params">_amount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>)</span> public view returns (uint256)</code></pre><p>Converts an amount to wei, based on the decimals the amount has</p>
<h4 id="parameters-23"><a class="header-link" href="#parameters-23"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amount</td>
<td>uint256</td>
<td>The amount to convert</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the amount we want to convert</td>
</tr>
</tbody></table>
<h4 id="return-values-4"><a class="header-link" href="#return-values-4"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>uint256 The converted amount in wei</td>
</tr>
</tbody></table>
<h3 id="amountfromwei"><a class="header-link" href="#amountfromwei"></a>amountFromWei</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> amount<span class="hljs-constructor">FromWei(<span class="hljs-params">uint256</span> <span class="hljs-params">_amount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>)</span> public view returns (uint256)</code></pre><p>Converts an amount from wei, based on the decimals the amount has</p>
<h4 id="parameters-24"><a class="header-link" href="#parameters-24"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amount</td>
<td>uint256</td>
<td>The amount to convert</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the amount we want to convert</td>
</tr>
</tbody></table>
<h4 id="return-values-5"><a class="header-link" href="#return-values-5"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>uint256 The converted amount</td>
</tr>
</tbody></table>
<h3 id="tokenidtoprice"><a class="header-link" href="#tokenidtoprice"></a>tokenIdToPrice</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> tokenIdToPrice(uint8 _tokenId) <span class="hljs-built_in">public</span> <span class="hljs-keyword">view</span> <span class="hljs-keyword">returns</span> (uint256)</code></pre><p>Gets the price of a token from Chainlink</p>
<h4 id="parameters-25"><a class="header-link" href="#parameters-25"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_tokenId</td>
<td>uint8</td>
<td>Id of the token we want the price</td>
</tr>
</tbody></table>
<h4 id="return-values-6"><a class="header-link" href="#return-values-6"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>uint256 The price of the token</td>
</tr>
</tbody></table>
<h3 id="getliquidationpricecollateral"><a class="header-link" href="#getliquidationpricecollateral"></a>getLiquidationPriceCollateral</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> get<span class="hljs-constructor">LiquidationPriceCollateral(<span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmountWei</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountForTokenWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountForTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_liquidationLimit</span>)</span> public view returns (uint256)</code></pre><p>Calculates the liquidation price of the collateral token</p>
<h4 id="return-values-7"><a class="header-link" href="#return-values-7"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>liquidationPrice Price of the collateral token at which a liquidation will be possible</td>
</tr>
</tbody></table>
<h3 id="getliquidationpriceamountfor"><a class="header-link" href="#getliquidationpriceamountfor"></a>getLiquidationPriceAmountFor</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> get<span class="hljs-constructor">LiquidationPriceAmountFor(<span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmountWei</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountForTokenWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_liquidationLimit</span>)</span> public view returns (uint256)</code></pre><p>Calculates the liquidation price of the debt token</p>
<h4 id="return-values-8"><a class="header-link" href="#return-values-8"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>liquidationPrice Price of the debt token at which a liquidation will be possible</td>
</tr>
</tbody></table>
<h3 id="transfersendertocontract"><a class="header-link" href="#transfersendertocontract"></a>transferSenderToContract</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> transfer<span class="hljs-constructor">SenderToContract(<span class="hljs-params">address</span> <span class="hljs-params">_sender</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountToken</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>)</span> internal</code></pre><p>Transfers tokens from the sender to this contract</p>
<p><em>Only callable internally by this contract</em></p>
<h3 id="transfercontracttosender"><a class="header-link" href="#transfercontracttosender"></a>transferContractToSender</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> transfer<span class="hljs-constructor">ContractToSender(<span class="hljs-params">address</span> <span class="hljs-params">_sender</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountToken</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>)</span> internal</code></pre><p>Transfers tokens from this contract to the sender of the tx</p>
<p><em>Only callable internally by this contract</em></p>
<h3 id="transferacceptsale"><a class="header-link" href="#transferacceptsale"></a>transferAcceptSale</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> transfer<span class="hljs-constructor">AcceptSale(<span class="hljs-params">address</span> <span class="hljs-params">_sender</span>, <span class="hljs-params">address</span> <span class="hljs-params">_dividendTokenContractAddress</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmount</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountToken</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>)</span> internal</code></pre><p>Handles the transfer of the collateral, fee, and amount bought</p>
<p><em>Only callable internally by this contract</em></p>
<h4 id="parameters-26"><a class="header-link" href="#parameters-26"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_sender</td>
<td>address</td>
<td>Address sending the tokens</td>
</tr>
<tr>
<td>_dividendTokenContractAddress</td>
<td>address</td>
<td></td>
</tr>
<tr>
<td>_collateralTokenAmount</td>
<td>uint256</td>
<td>Collateral amount to transfer from the sender</td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the collateral token</td>
</tr>
<tr>
<td>_amountToken</td>
<td>uint256</td>
<td>Amount bought by the sender</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the bought token</td>
</tr>
</tbody></table>
<h3 id="transferbuyertoseller"><a class="header-link" href="#transferbuyertoseller"></a>transferBuyerToSeller</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> transfer<span class="hljs-constructor">BuyerToSeller(<span class="hljs-params">address</span> <span class="hljs-params">_sender</span>, <span class="hljs-params">address</span> <span class="hljs-params">_receiver</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_amountToken</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>)</span> internal</code></pre><p>Transfers token from the buyer to the seller of an offer</p>
<p><em>Only callable internally by this contract</em></p>
<h4 id="parameters-27"><a class="header-link" href="#parameters-27"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_sender</td>
<td>address</td>
<td>Address sending the tokens</td>
</tr>
<tr>
<td>_receiver</td>
<td>address</td>
<td>Address receiving the tokens</td>
</tr>
<tr>
<td>_amountToken</td>
<td>uint256</td>
<td>Amount to send</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the amount to send</td>
</tr>
</tbody></table>
<h3 id="getcollateral"><a class="header-link" href="#getcollateral"></a>getCollateral</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> get<span class="hljs-constructor">Collateral(<span class="hljs-params">uint256</span> <span class="hljs-params">_amountTokenWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmountWeiToDebtRatio</span>)</span> public view returns (uint256)</code></pre><p>Calculates the collateral needed to create a buy offer or accept a sale offer</p>
<h4 id="parameters-28"><a class="header-link" href="#parameters-28"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountTokenWei</td>
<td>uint256</td>
<td>Amount on which the collateral will be calculated</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the amount</td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the collateral</td>
</tr>
<tr>
<td>_collateralTokenAmountWeiToDebtRatio</td>
<td>uint256</td>
<td>Collateral to debt ratio, used to calculate the collateral amount.</td>
</tr>
</tbody></table>
<h4 id="return-values-9"><a class="header-link" href="#return-values-9"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>collateral Computed collateral amount</td>
</tr>
</tbody></table>
<h3 id="getratio"><a class="header-link" href="#getratio"></a>getRatio</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> get<span class="hljs-constructor">Ratio(<span class="hljs-params">uint256</span> <span class="hljs-params">_amountTokenWei</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmountWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>)</span> public view returns (uint256)</code></pre><p>Calculates the ratio of the collateral over the debt</p>
<h4 id="parameters-29"><a class="header-link" href="#parameters-29"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountTokenWei</td>
<td>uint256</td>
<td>Amount of debt</td>
</tr>
<tr>
<td>_collateralTokenAmountWei</td>
<td>uint256</td>
<td>Collateral amount</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the debt amount</td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the collateral</td>
</tr>
</tbody></table>
<h4 id="return-values-10"><a class="header-link" href="#return-values-10"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>uint256</td>
<td>ratio Calculated ratio</td>
</tr>
</tbody></table>
<h3 id="canliquidate"><a class="header-link" href="#canliquidate"></a>canLiquidate</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> can<span class="hljs-constructor">Liquidate(<span class="hljs-params">uint256</span> <span class="hljs-params">_amountTokenWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmountWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_liquidationLimitRatio</span>)</span> public view returns (<span class="hljs-built_in">bool</span>)</code></pre><p>Determines if the collateral to debt ratio has reached the liquidation limit</p>
<h4 id="parameters-30"><a class="header-link" href="#parameters-30"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountTokenWei</td>
<td>uint256</td>
<td>Amount of debt</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the debt amount</td>
</tr>
<tr>
<td>_collateralTokenAmountWei</td>
<td>uint256</td>
<td>Collateral amount</td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the collateral</td>
</tr>
<tr>
<td>_liquidationLimitRatio</td>
<td>uint256</td>
<td>Ratio at which liquidation will be possible</td>
</tr>
</tbody></table>
<h4 id="return-values-11"><a class="header-link" href="#return-values-11"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>bool</td>
<td>bool If the offer can be liquidated or not</td>
</tr>
</tbody></table>
<h3 id="canliquidatetimeover"><a class="header-link" href="#canliquidatetimeover"></a>canLiquidateTimeOver</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> can<span class="hljs-constructor">LiquidateTimeOver(<span class="hljs-params">uint256</span> <span class="hljs-params">_timeAccepted</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_repayInSeconds</span>)</span> public view returns (<span class="hljs-built_in">bool</span>)</code></pre><p>Determines if the repayment period has passed</p>
<h4 id="parameters-31"><a class="header-link" href="#parameters-31"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_timeAccepted</td>
<td>uint256</td>
<td>Time at which the offer was accepted</td>
</tr>
<tr>
<td>_repayInSeconds</td>
<td>uint256</td>
<td>Repayment period of the offer</td>
</tr>
</tbody></table>
<h4 id="return-values-12"><a class="header-link" href="#return-values-12"></a>Return Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[0]</td>
<td>bool</td>
<td>bool If the offer can be liquidated or not</td>
</tr>
</tbody></table>
<h3 id="liquidatetokens"><a class="header-link" href="#liquidatetokens"></a>liquidateTokens</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> liquidate<span class="hljs-constructor">Tokens(<span class="hljs-params">uint256</span> <span class="hljs-params">_amountTokenWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmountWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>, <span class="hljs-params">address</span> <span class="hljs-params">_seller</span>, <span class="hljs-params">address</span> <span class="hljs-params">_buyer</span>, <span class="hljs-params">address</span> <span class="hljs-params">_sender</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_liquidationLossRatio</span>)</span> internal</code></pre><h4 id="parameters-32"><a class="header-link" href="#parameters-32"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountTokenWei</td>
<td>uint256</td>
<td>Amount of debt</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the debt amount</td>
</tr>
<tr>
<td>_collateralTokenAmountWei</td>
<td>uint256</td>
<td>Amount of collateral</td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the collateral</td>
</tr>
<tr>
<td>_seller</td>
<td>address</td>
<td>Address of the offer&#39;s seller</td>
</tr>
<tr>
<td>_buyer</td>
<td>address</td>
<td>Address of the offer&#39;s buyer</td>
</tr>
<tr>
<td>_sender</td>
<td>address</td>
<td>Address of the liquidator</td>
</tr>
<tr>
<td>_liquidationLossRatio</td>
<td>uint256</td>
<td>Ratio at which a liquidation will incur a loss (i.e., the collateral value is below the debt)</td>
</tr>
</tbody></table>
<h3 id="liquidatetokensbyseller"><a class="header-link" href="#liquidatetokensbyseller"></a>liquidateTokensBySeller</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> liquidate<span class="hljs-constructor">TokensBySeller(<span class="hljs-params">uint256</span> <span class="hljs-params">_amountTokenWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmountWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>, <span class="hljs-params">address</span> <span class="hljs-params">_buyer</span>, <span class="hljs-params">address</span> <span class="hljs-params">_seller</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_liquidationLossRatio</span>)</span> internal</code></pre><h4 id="parameters-33"><a class="header-link" href="#parameters-33"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountTokenWei</td>
<td>uint256</td>
<td>Amount of debt</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the debt amount</td>
</tr>
<tr>
<td>_collateralTokenAmountWei</td>
<td>uint256</td>
<td>Amount of collateral</td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the collateral</td>
</tr>
<tr>
<td>_buyer</td>
<td>address</td>
<td>Address of the buyer</td>
</tr>
<tr>
<td>_seller</td>
<td>address</td>
<td>Address of the seller</td>
</tr>
<tr>
<td>_liquidationLossRatio</td>
<td>uint256</td>
<td>Collateral to debt ratio at which a liquidation will incur a loss (i.e., when the collateral value is below the debt value)</td>
</tr>
</tbody></table>
<h3 id="liquidatetokensbybuyer"><a class="header-link" href="#liquidatetokensbybuyer"></a>liquidateTokensByBuyer</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> liquidate<span class="hljs-constructor">TokensByBuyer(<span class="hljs-params">uint256</span> <span class="hljs-params">_amountTokenWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_collateralTokenAmountWei</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_collateralTokenId</span>, <span class="hljs-params">address</span> <span class="hljs-params">_buyer</span>, <span class="hljs-params">address</span> <span class="hljs-params">_seller</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_liquidationLossRatio</span>)</span> internal</code></pre><p>Liquidates an offer when the liquidator is the buyer</p>
<p><em>Only callable internally by this contract, reverts if it incurs a loss to the seller.</em></p>
<h4 id="parameters-34"><a class="header-link" href="#parameters-34"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountTokenWei</td>
<td>uint256</td>
<td>Amount of debt</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the debt amount</td>
</tr>
<tr>
<td>_collateralTokenAmountWei</td>
<td>uint256</td>
<td>Amount of collateral</td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the collateral</td>
</tr>
<tr>
<td>_buyer</td>
<td>address</td>
<td>Address of the buyer</td>
</tr>
<tr>
<td>_seller</td>
<td>address</td>
<td>Address of the seller</td>
</tr>
<tr>
<td>_liquidationLossRatio</td>
<td>uint256</td>
<td>Collateral to debt ratio at which a liquidation will incur a loss (i.e., when the collateral value is below the debt value)</td>
</tr>
</tbody></table>
<h3 id="repay"><a class="header-link" href="#repay"></a>repay</h3>
<pre class="hljs"><code>function repay(uint256 <span class="hljs-variable">_amountToRepay</span>, uint8 <span class="hljs-variable">_amountToRepayId</span>, uint256 <span class="hljs-variable">_collateralTokenAmountWei</span>, uint8 <span class="hljs-variable">_collateralTokenId</span>, address <span class="hljs-variable">_seller</span>, address <span class="hljs-variable">_buyer</span>) internal</code></pre><p>Repays a debt, and transfers back the collateral.</p>
<p><em>Only callable internally by this contract</em></p>
<h4 id="parameters-35"><a class="header-link" href="#parameters-35"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountToRepay</td>
<td>uint256</td>
<td>Amount to repay</td>
</tr>
<tr>
<td>_amountToRepayId</td>
<td>uint8</td>
<td>Id of the amount to repay</td>
</tr>
<tr>
<td>_collateralTokenAmountWei</td>
<td>uint256</td>
<td>Amount of collateral</td>
</tr>
<tr>
<td>_collateralTokenId</td>
<td>uint8</td>
<td>Id of the collateral</td>
</tr>
<tr>
<td>_seller</td>
<td>address</td>
<td>Address of the seller</td>
</tr>
<tr>
<td>_buyer</td>
<td>address</td>
<td>Address of the buyer</td>
</tr>
</tbody></table>
<h3 id="transferfee"><a class="header-link" href="#transferfee"></a>transferFee</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> transfer<span class="hljs-constructor">Fee(<span class="hljs-params">uint256</span> <span class="hljs-params">_amountToken</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">_amountTokenId</span>, <span class="hljs-params">address</span> <span class="hljs-params">_dividendTokenContractAddress</span>, <span class="hljs-params">address</span> <span class="hljs-params">_sender</span>)</span> internal</code></pre><p>Transfers the fee from the sender to the fee address</p>
<p><em>Only callable internally by this contract</em></p>
<h4 id="parameters-36"><a class="header-link" href="#parameters-36"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountToken</td>
<td>uint256</td>
<td>Amount of which 0.1% will be taken</td>
</tr>
<tr>
<td>_amountTokenId</td>
<td>uint8</td>
<td>Id of the amount</td>
</tr>
<tr>
<td>_dividendTokenContractAddress</td>
<td>address</td>
<td></td>
</tr>
<tr>
<td>_sender</td>
<td>address</td>
<td>Address of the sender</td>
</tr>
</tbody></table>
<h3 id="checktokenidinrange"><a class="header-link" href="#checktokenidinrange"></a>checkTokenIdInRange</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">TokenIdInRange(<span class="hljs-params">uint8</span> <span class="hljs-params">_id</span>)</span> internal view</code></pre><p>Checks if token Id is a tradable token</p>
<h4 id="parameters-37"><a class="header-link" href="#parameters-37"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_id</td>
<td>uint8</td>
<td>Id of the token</td>
</tr>
</tbody></table>
<h3 id="checkaddressnotzero"><a class="header-link" href="#checkaddressnotzero"></a>checkAddressNotZero</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">AddressNotZero(<span class="hljs-params">address</span> <span class="hljs-params">_address</span>)</span> internal pure</code></pre><p>Checks if address is zero address</p>
<h4 id="parameters-38"><a class="header-link" href="#parameters-38"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_address</td>
<td>address</td>
<td>Address to check</td>
</tr>
</tbody></table>
<h3 id="checkaddressnotsender"><a class="header-link" href="#checkaddressnotsender"></a>checkAddressNotSender</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">AddressNotSender(<span class="hljs-params">address</span> <span class="hljs-params">_address</span>)</span> internal view</code></pre><p>Checks if address matches with sender of transaction, reverts if true</p>
<h4 id="parameters-39"><a class="header-link" href="#parameters-39"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_address</td>
<td>address</td>
<td>Address to compare with msg.sender</td>
</tr>
</tbody></table>
<h3 id="checkaddresssender"><a class="header-link" href="#checkaddresssender"></a>checkAddressSender</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">AddressSender(<span class="hljs-params">address</span> <span class="hljs-params">_address</span>)</span> internal view</code></pre><p>Checks if address matches with sender of transaction, reverts if false</p>
<h4 id="parameters-40"><a class="header-link" href="#parameters-40"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_address</td>
<td>address</td>
<td>Address to compare with msg.snder</td>
</tr>
</tbody></table>
<h3 id="checkispositive"><a class="header-link" href="#checkispositive"></a>checkIsPositive</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">IsPositive(<span class="hljs-params">uint256</span> <span class="hljs-params">_amountTokenWei</span>)</span> internal pure</code></pre><p>Checks if amount is positive, reverts if false</p>
<h4 id="parameters-41"><a class="header-link" href="#parameters-41"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_amountTokenWei</td>
<td>uint256</td>
<td>Amount to check</td>
</tr>
</tbody></table>
<h3 id="checktokensidnotsame"><a class="header-link" href="#checktokensidnotsame"></a>checkTokensIdNotSame</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">TokensIdNotSame(<span class="hljs-params">uint8</span> <span class="hljs-params">_id</span>, <span class="hljs-params">uint8</span> <span class="hljs-params">id_</span>)</span> internal pure</code></pre><p>Checks if id of two tokens are the same, reverts if true</p>
<h4 id="parameters-42"><a class="header-link" href="#parameters-42"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_id</td>
<td>uint8</td>
<td>Id of first token</td>
</tr>
<tr>
<td>id_</td>
<td>uint8</td>
<td>id of second token</td>
</tr>
</tbody></table>
<h3 id="checkofferisopen"><a class="header-link" href="#checkofferisopen"></a>checkOfferIsOpen</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">OfferIsOpen(<span class="hljs-params">enum</span> SpectrrData.OfferStatus <span class="hljs-params">_offerStatus</span>)</span> internal pure</code></pre><p>Checks if offer is open (i.e. not accepted or closed), reverts if false</p>
<h4 id="parameters-43"><a class="header-link" href="#parameters-43"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerStatus</td>
<td>enum SpectrrData.OfferStatus</td>
<td>Current state of the offer</td>
</tr>
</tbody></table>
<h3 id="checkofferisaccepted"><a class="header-link" href="#checkofferisaccepted"></a>checkOfferIsAccepted</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">OfferIsAccepted(<span class="hljs-params">enum</span> SpectrrData.OfferStatus <span class="hljs-params">_offerStatus</span>)</span> internal pure</code></pre><p>Checks if offer is accepted (i.e. not open or closed), reverts if false</p>
<h4 id="parameters-44"><a class="header-link" href="#parameters-44"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerStatus</td>
<td>enum SpectrrData.OfferStatus</td>
<td>Current state of the offer</td>
</tr>
</tbody></table>
<h3 id="checkofferisclosed"><a class="header-link" href="#checkofferisclosed"></a>checkOfferIsClosed</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">OfferIsClosed(<span class="hljs-params">enum</span> SpectrrData.OfferStatus <span class="hljs-params">_offerStatus</span>)</span> internal pure</code></pre><p>Checks if offer is closed (i.e. not open or closed), reverts if false</p>
<h4 id="parameters-45"><a class="header-link" href="#parameters-45"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerStatus</td>
<td>enum SpectrrData.OfferStatus</td>
<td>Current state of the offer</td>
</tr>
</tbody></table>
<h3 id="checkofferisnotclosed"><a class="header-link" href="#checkofferisnotclosed"></a>checkOfferIsNotClosed</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">OfferIsNotClosed(<span class="hljs-params">enum</span> SpectrrData.OfferStatus <span class="hljs-params">_offerStatus</span>)</span> internal pure</code></pre><p>Checks if offer is closed (i.e. not open or closed), reverts if false</p>
<h4 id="parameters-46"><a class="header-link" href="#parameters-46"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_offerStatus</td>
<td>enum SpectrrData.OfferStatus</td>
<td>Current state of the offer</td>
</tr>
</tbody></table>
<h3 id="checkminratio"><a class="header-link" href="#checkminratio"></a>checkMinRatio</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">MinRatio(<span class="hljs-params">uint256</span> <span class="hljs-params">_ratio</span>)</span> internal pure</code></pre><p>Checks if ratio is at least 1.0</p>
<h4 id="parameters-47"><a class="header-link" href="#parameters-47"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_ratio</td>
<td>uint256</td>
<td>The ratio value to check</td>
</tr>
</tbody></table>
<h3 id="checkislessthan"><a class="header-link" href="#checkislessthan"></a>checkIsLessThan</h3>
<pre class="hljs"><code><span class="hljs-keyword">function</span> check<span class="hljs-constructor">IsLessThan(<span class="hljs-params">uint256</span> <span class="hljs-params">_val1</span>, <span class="hljs-params">uint256</span> <span class="hljs-params">_val2</span>)</span> internal pure</code></pre><p>Checks if first value is less than second value</p>
<h4 id="parameters-48"><a class="header-link" href="#parameters-48"></a>Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>_val1</td>
<td>uint256</td>
<td>The first value</td>
</tr>
<tr>
<td>_val2</td>
<td>uint256</td>
<td>The second value</td>
</tr>
</tbody></table>
<h2 id="spectrrpaymentsplitter"><a class="header-link" href="#spectrrpaymentsplitter"></a>SpectrrPaymentSplitter</h2>
<p>This contract receives and distributes the fees generated by Spectrr Finance to different receivers.</p>
<h3 id="constructor-1"><a class="header-link" href="#constructor-1"></a>constructor</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">()</span> <span class="hljs-title">public</span></span></code></pre>    </article>
  </body>
</html>
